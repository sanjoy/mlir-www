<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: lib/Dialect/Linalg/Transforms/FusionOnTensors.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MLIR
   &#160;<span id="projectnumber">14.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1a25ec519b6c1121408b67cc33ce3f15.html">Dialect</a></li><li class="navelem"><a class="el" href="dir_8edb792440615361a0811a7329611599.html">Linalg</a></li><li class="navelem"><a class="el" href="dir_7e2f808e77498894ca0efbd745da2201.html">Transforms</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">FusionOnTensors.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="lib_2Dialect_2Linalg_2Transforms_2PassDetail_8h_source.html">PassDetail.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SliceAnalysis_8h_source.html">mlir/Analysis/SliceAnalysis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="AffineOps_8h_source.html">mlir/Dialect/Affine/IR/AffineOps.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dialect_2Linalg_2IR_2Linalg_8h_source.html">mlir/Dialect/Linalg/IR/Linalg.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dialect_2Linalg_2Passes_8h_source.html">mlir/Dialect/Linalg/Passes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dialect_2Linalg_2Transforms_2Transforms_8h_source.html">mlir/Dialect/Linalg/Transforms/Transforms.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dialect_2Linalg_2Utils_2Utils_8h_source.html">mlir/Dialect/Linalg/Utils/Utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dialect_2Tensor_2IR_2Tensor_8h_source.html">mlir/Dialect/Tensor/IR/Tensor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="IR_2AffineExpr_8h_source.html">mlir/IR/AffineExpr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="IR_2AffineMap_8h_source.html">mlir/IR/AffineMap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Support_2LLVM_8h_source.html">mlir/Support/LLVM.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for FusionOnTensors.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="FusionOnTensors_8cpp__incl.png" border="0" usemap="#lib_2Dialect_2Linalg_2Transforms_2FusionOnTensors_8cpp" alt=""/></div>
<map name="lib_2Dialect_2Linalg_2Transforms_2FusionOnTensors_8cpp" id="lib_2Dialect_2Linalg_2Transforms_2FusionOnTensors_8cpp">
<area shape="rect" id="node2" href="lib_2Dialect_2Linalg_2Transforms_2PassDetail_8h.html" title="PassDetail.h" alt="" coords="2557,102,2659,129"/>
<area shape="rect" id="node3" href="AffineOps_8h.html" title="mlir/Dialect/Affine\l/IR/AffineOps.h" alt="" coords="913,452,1053,493"/>
<area shape="rect" id="node5" href="IR_2AffineMap_8h.html" title="mlir/IR/AffineMap.h" alt="" coords="1043,638,1189,665"/>
<area shape="rect" id="node6" href="IR_2AffineExpr_8h.html" title="mlir/IR/AffineExpr.h" alt="" coords="515,727,661,754"/>
<area shape="rect" id="node7" href="Support_2LLVM_8h.html" title="mlir/Support/LLVM.h" alt="" coords="1151,809,1302,836"/>
<area shape="rect" id="node21" href="SliceAnalysis_8h.html" title="mlir/Analysis/SliceAnalysis.h" alt="" coords="281,727,490,754"/>
<area shape="rect" id="node23" href="Dialect_2Linalg_2IR_2Linalg_8h.html" title="mlir/Dialect/Linalg\l/IR/Linalg.h" alt="" coords="2151,363,2292,404"/>
<area shape="rect" id="node31" href="Dialect_2Tensor_2IR_2Tensor_8h.html" title="mlir/Dialect/Tensor\l/IR/Tensor.h" alt="" coords="2899,452,3043,493"/>
<area shape="rect" id="node41" href="Dialect_2Linalg_2Passes_8h.html" title="mlir/Dialect/Linalg\l/Passes.h" alt="" coords="2804,95,2945,136"/>
<area shape="rect" id="node42" href="Dialect_2Linalg_2Transforms_2Transforms_8h.html" title="mlir/Dialect/Linalg\l/Transforms/Transforms.h" alt="" coords="4001,184,4188,225"/>
<area shape="rect" id="node45" href="Dialect_2Linalg_2Utils_2Utils_8h.html" title="mlir/Dialect/Linalg\l/Utils/Utils.h" alt="" coords="2440,273,2581,315"/>
<area shape="rect" id="node13" href="IR_2Dialect_8h.html" title="mlir/IR/Dialect.h" alt="" coords="3529,727,3655,754"/>
<area shape="rect" id="node19" href="include_2mlir_2Pass_2Pass_8h.html" title="mlir/Pass/Pass.h" alt="" coords="2811,191,2938,218"/>
<area shape="rect" id="node4" href="AffineMemoryOpInterfaces_8h.html" title="mlir/Dialect/Affine\l/IR/AffineMemoryOpInterfaces.h" alt="" coords="824,541,1053,583"/>
<area shape="rect" id="node11" href="Ops_8h.html" title="mlir/Dialect/StandardOps\l/IR/Ops.h" alt="" coords="2345,541,2530,583"/>
<area shape="rect" id="node16" href="LoopLikeInterface_8h.html" title="mlir/Interfaces/LoopLike\lInterface.h" alt="" coords="195,541,373,583"/>
<area shape="rect" id="node10" href="IR_2BuiltinTypes_8h.html" title="mlir/IR/BuiltinTypes.h" alt="" coords="2125,727,2285,754"/>
<area shape="rect" id="node12" href="Arithmetic_8h.html" title="mlir/Dialect/Arithmetic\l/IR/Arithmetic.h" alt="" coords="2883,631,3053,672"/>
<area shape="rect" id="node14" href="SideEffectInterfaces_8h.html" title="mlir/Interfaces/SideEffect\lInterfaces.h" alt="" coords="2699,720,2885,761"/>
<area shape="rect" id="node15" href="InferTypeOpInterface_8h.html" title="mlir/Interfaces/InferType\lOpInterface.h" alt="" coords="1987,631,2168,672"/>
<area shape="rect" id="node24" href="Math_8h.html" title="mlir/Dialect/Math/IR\l/Math.h" alt="" coords="2426,631,2577,672"/>
<area shape="rect" id="node25" href="MemRef_8h.html" title="mlir/Dialect/MemRef\l/IR/MemRef.h" alt="" coords="3432,452,3587,493"/>
<area shape="rect" id="node26" href="ReshapeOpsUtils_8h.html" title="mlir/Dialect/Utils\l/ReshapeOpsUtils.h" alt="" coords="3731,541,3879,583"/>
<area shape="rect" id="node28" href="CopyOpInterface_8h.html" title="mlir/Interfaces/CopyOpInterface.h" alt="" coords="3160,549,3403,575"/>
<area shape="rect" id="node29" href="ViewLikeInterface_8h.html" title="mlir/Interfaces/ViewLike\lInterface.h" alt="" coords="3078,631,3258,672"/>
<area shape="rect" id="node32" href="TilingInterface_8h.html" title="mlir/Interfaces/TilingInterface.h" alt="" coords="2656,549,2883,575"/>
<area shape="rect" id="node33" href="StructuredOpsUtils_8h.html" title="mlir/Dialect/Utils\l/StructuredOpsUtils.h" alt="" coords="1520,541,1680,583"/>
<area shape="rect" id="node34" href="BuiltinDialect_8h.html" title="mlir/IR/BuiltinDialect.h" alt="" coords="3681,638,3850,665"/>
<area shape="rect" id="node35" href="ImplicitLocOpBuilder_8h.html" title="mlir/IR/ImplicitLocOpBuilder.h" alt="" coords="1281,549,1495,575"/>
<area shape="rect" id="node36" href="TypeUtilities_8h.html" title="mlir/IR/TypeUtilities.h" alt="" coords="2368,459,2531,486"/>
<area shape="rect" id="node38" href="LinalgInterfaces_8h.html" title="mlir/Dialect/Linalg\l/IR/LinalgInterfaces.h" alt="" coords="1814,452,1973,493"/>
<area shape="rect" id="node27" href="PatternMatch_8h.html" title="mlir/IR/PatternMatch.h" alt="" coords="4182,638,4349,665"/>
<area shape="rect" id="node30" href="StaticValueUtils_8h.html" title="mlir/Dialect/Utils\l/StaticValueUtils.h" alt="" coords="3964,720,4105,761"/>
<area shape="rect" id="node44" href="VectorToSCF_8h.html" title="mlir/Conversion/VectorTo\lSCF/VectorToSCF.h" alt="" coords="4107,363,4291,404"/>
<area shape="rect" id="node46" href="Dialect_2SCF_2Utils_8h.html" title="mlir/Dialect/SCF/Utils.h" alt="" coords="4057,549,4229,575"/>
<area shape="rect" id="node47" href="VectorTransforms_8h.html" title="mlir/Dialect/Vector\l/VectorTransforms.h" alt="" coords="4293,273,4443,315"/>
<area shape="rect" id="node48" href="Dialect_2X86Vector_2Transforms_8h.html" title="mlir/Dialect/X86Vector\l/Transforms.h" alt="" coords="4468,273,4636,315"/>
<area shape="rect" id="node49" href="DialectConversion_8h.html" title="mlir/Transforms/DialectConversion.h" alt="" coords="4660,281,4919,307"/>
</map>
</div>
</div>
<p><a href="FusionOnTensors_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a739c83a04b96a2c13e47d430bb5dd5d5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; int64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FusionOnTensors_8cpp.html#a739c83a04b96a2c13e47d430bb5dd5d5">getTiledSliceDims</a> (<a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *consumerOperand, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; int64_t &gt; tiledLoopDims)</td></tr>
<tr class="memdesc:a739c83a04b96a2c13e47d430bb5dd5d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the tiled slice dimensions given the tiled consumer loop dimensions.  <a href="#a739c83a04b96a2c13e47d430bb5dd5d5">More...</a><br /></td></tr>
<tr class="separator:a739c83a04b96a2c13e47d430bb5dd5d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaa1e370f6b0548876aaad87d5c173d4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; int64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FusionOnTensors_8cpp.html#adaa1e370f6b0548876aaad87d5c173d4">getTiledProducerLoops</a> (<a class="el" href="classmlir_1_1OpResult.html">OpResult</a> producerResult, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; int64_t &gt; tiledSliceDimIndices)</td></tr>
<tr class="memdesc:adaa1e370f6b0548876aaad87d5c173d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a vector of <code>tiledSliceDimIndices</code> that represent the tiled dimensions of the producer result slice returns the tiled producer loop dimensions.  <a href="#adaa1e370f6b0548876aaad87d5c173d4">More...</a><br /></td></tr>
<tr class="separator:adaa1e370f6b0548876aaad87d5c173d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ed154233dbf0a242c86b0146a11dd5c"><td class="memItemLeft" align="right" valign="top">static LinalgOp&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FusionOnTensors_8cpp.html#a0ed154233dbf0a242c86b0146a11dd5c">getTiledProducer</a> (<a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;b, <a class="el" href="classmlir_1_1OpResult.html">OpResult</a> producerResult, tensor::ExtractSliceOp sliceOp, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; int64_t &gt; tiledSliceDimIndices, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; int64_t &gt; tiledProducerLoopIndices, <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *iterArg)</td></tr>
<tr class="memdesc:a0ed154233dbf0a242c86b0146a11dd5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the producer fused in place of <code>sliceOp</code>.  <a href="#a0ed154233dbf0a242c86b0146a11dd5c">More...</a><br /></td></tr>
<tr class="separator:a0ed154233dbf0a242c86b0146a11dd5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a0ed154233dbf0a242c86b0146a11dd5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ed154233dbf0a242c86b0146a11dd5c">&#9670;&nbsp;</a></span>getTiledProducer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static LinalgOp getTiledProducer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpResult.html">OpResult</a>&#160;</td>
          <td class="paramname"><em>producerResult</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tensor::ExtractSliceOp&#160;</td>
          <td class="paramname"><em>sliceOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; int64_t &gt;&#160;</td>
          <td class="paramname"><em>tiledSliceDimIndices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; int64_t &gt;&#160;</td>
          <td class="paramname"><em>tiledProducerLoopIndices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *&#160;</td>
          <td class="paramname"><em>iterArg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the producer fused in place of <code>sliceOp</code>. </p>
<p>Tile the producer operands along the <code>tiledSliceDimIndices</code> and clone the producer. Consider the case of fusion of an output tensor: </p><div class="fragment"><div class="line">%1 = producer ins(...) outs(%0)</div><div class="line">%2 = consumer ins(...) outs(%1)</div></div><!-- fragment --><p> When consumer is tiled, %1 appears in the loop iter_args: </p><div class="fragment"><div class="line">%1 = producer ins(...) outs(%0)</div><div class="line">%2 = scf.for ... iter_args(%1) .. (%bbarg) {</div><div class="line">  %t1 = <a class="code" href="namespacetensor.html">tensor</a>.extract_slice %bbarg[..]</div><div class="line">  %t2 = consumer ins(...) outs(%t1)</div><div class="line">  %r = <a class="code" href="namespacetensor.html">tensor</a>.insert_slice %t2, %bbarg[...]</div><div class="line">}</div></div><!-- fragment --><p> Fusing %1 into the loop requires updating iter_args(%1) to iter_args(%0): </p><div class="fragment"><div class="line">%2 = scf.for ... iter_args(%0) .. (%bbarg) {</div><div class="line">  %t0 = <a class="code" href="namespacetensor.html">tensor</a>.extract_slice %bbarg[..]</div><div class="line">  %t1 = producer ins(...) outs(%t0)</div><div class="line">  %t2 = consumer ins(...) outs(%t1)</div><div class="line">  %r = <a class="code" href="namespacetensor.html">tensor</a>.insert_slice %t2, %bbarg[...]</div><div class="line">}</div></div><!-- fragment --><p> This transformation is only valid if bbarg is exclusively used by the output ExtractSliceOp / InsertSliceOp pair, which is checked by the <code>fuseProducer</code> method. TODO: instead of check and failure, insert new iter_args each time a producer is fused into a consumer and fold away unused iter_args. </p>

<p class="definition">Definition at line <a class="el" href="FusionOnTensors_8cpp_source.html#l00127">127</a> of file <a class="el" href="FusionOnTensors_8cpp_source.html">FusionOnTensors.cpp</a>.</p>

<p class="reference">References <a class="el" href="Dialect_2Linalg_2Utils_2Utils_8cpp_source.html#l00944">mlir::linalg::addTileLoopIvsToIndexOpResults()</a>, <a class="el" href="Builders_8h_source.html#l00430">mlir::OpBuilder::create()</a>, <a class="el" href="Value_8h_source.html#l00099">mlir::Value::dyn_cast()</a>, <a class="el" href="UseDefLists_8h_source.html#l00133">mlir::IROperand&lt; DerivedT, IRValueT &gt;::get()</a>, <a class="el" href="SliceAnalysis_8cpp_source.html#l00113">mlir::getBackwardSlice()</a>, <a class="el" href="Value_8cpp_source.html#l00212">mlir::OpOperand::getOperandNumber()</a>, <a class="el" href="Value_8h_source.html#l00307">mlir::BlockArgument::getOwner()</a>, <a class="el" href="Value_8h_source.html#l00432">mlir::OpResult::getOwner()</a>, <a class="el" href="Block_8cpp_source.html#l00030">mlir::Block::getParentOp()</a>, <a class="el" href="Operation_8h_source.html#l00117">mlir::Operation::getParentOp()</a>, <a class="el" href="Value_8h_source.html#l00435">mlir::OpResult::getResultNumber()</a>, <a class="el" href="Value_8h_source.html#l00212">mlir::Value::getUsers()</a>, <a class="el" href="Value_8h_source.html#l00199">mlir::Value::hasOneUse()</a>, <a class="el" href="Dialect_2Linalg_2Utils_2Utils_8cpp_source.html#l00899">mlir::linalg::makeTiledShapes()</a>, <a class="el" href="UseDefLists_8h_source.html#l00136">mlir::IROperand&lt; DerivedT, IRValueT &gt;::set()</a>, and <a class="el" href="Builders_8h_source.html#l00343">mlir::OpBuilder::setInsertionPointAfter()</a>.</p>

<p class="reference">Referenced by <a class="el" href="FusionOnTensors_8cpp_source.html#l00321">mlir::linalg::TileLoopNest::fuseProducer()</a>.</p>

</div>
</div>
<a id="adaa1e370f6b0548876aaad87d5c173d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaa1e370f6b0548876aaad87d5c173d4">&#9670;&nbsp;</a></span>getTiledProducerLoops()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;int64_t&gt; getTiledProducerLoops </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpResult.html">OpResult</a>&#160;</td>
          <td class="paramname"><em>producerResult</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; int64_t &gt;&#160;</td>
          <td class="paramname"><em>tiledSliceDimIndices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a vector of <code>tiledSliceDimIndices</code> that represent the tiled dimensions of the producer result slice returns the tiled producer loop dimensions. </p>
<p>Example: </p><div class="fragment"><div class="line">%res = <a class="code" href="namespacelinalg.html">linalg</a>.fill(%cst, %input)</div><div class="line">scf.for %i</div><div class="line">  scf.for %<a class="code" href="unionj.html">j</a></div><div class="line">    %slice = <a class="code" href="namespacetensor.html">tensor</a>.extract_slice %res[%i, %<a class="code" href="unionj.html">j</a>]</div></div><!-- fragment --><p> getTiledProducerLoops(res, [0, 1]) returns the loop indices [0, 1]. </p>

<p class="definition">Definition at line <a class="el" href="FusionOnTensors_8cpp_source.html#l00065">65</a> of file <a class="el" href="FusionOnTensors_8cpp_source.html">FusionOnTensors.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2AffineMap_8cpp_source.html#l00320">mlir::AffineMap::getDimPosition()</a>, <a class="el" href="IR_2AffineMap_8cpp_source.html#l00302">mlir::AffineMap::getNumResults()</a>, <a class="el" href="Value_8h_source.html#l00432">mlir::OpResult::getOwner()</a>, <a class="el" href="Value_8h_source.html#l00435">mlir::OpResult::getResultNumber()</a>, <a class="el" href="IR_2AffineMap_8cpp_source.html#l00519">mlir::AffineMap::getSubMap()</a>, and <a class="el" href="IR_2AffineMap_8cpp_source.html#l00483">mlir::AffineMap::isProjectedPermutation()</a>.</p>

<p class="reference">Referenced by <a class="el" href="FusionOnTensors_8cpp_source.html#l00321">mlir::linalg::TileLoopNest::fuseProducer()</a>.</p>

</div>
</div>
<a id="a739c83a04b96a2c13e47d430bb5dd5d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a739c83a04b96a2c13e47d430bb5dd5d5">&#9670;&nbsp;</a></span>getTiledSliceDims()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;int64_t&gt; getTiledSliceDims </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *&#160;</td>
          <td class="paramname"><em>consumerOperand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; int64_t &gt;&#160;</td>
          <td class="paramname"><em>tiledLoopDims</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the tiled slice dimensions given the tiled consumer loop dimensions. </p>
<p>The slice defines a hyper rectangular iteration space and fusing the producer is always possible. However, depending on the consumer indexing map, not all slice elements may be consumed and the tiles may overlap. In these cases, fusion introduces redundant computation. </p>

<p class="definition">Definition at line <a class="el" href="FusionOnTensors_8cpp_source.html#l00037">37</a> of file <a class="el" href="FusionOnTensors_8cpp_source.html">FusionOnTensors.cpp</a>.</p>

<p class="reference">References <a class="el" href="Matchers_8h_source.html#l00206">mlir::detail::enumerate()</a>, <a class="el" href="UseDefLists_8h_source.html#l00037">mlir::detail::IROperandBase::getOwner()</a>, and <a class="el" href="IR_2AffineMap_8cpp_source.html#l00311">mlir::AffineMap::getResults()</a>.</p>

<p class="reference">Referenced by <a class="el" href="FusionOnTensors_8cpp_source.html#l00321">mlir::linalg::TileLoopNest::fuseProducer()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 26 2022 20:34:16 for MLIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
